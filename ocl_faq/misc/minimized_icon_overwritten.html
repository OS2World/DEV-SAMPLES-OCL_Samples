<html>

<!-- Generations (v1.0 to v1.5a) (c) InfoMedQue Inc., 1996 -->
<!-- Generations (c) Stephane Charette, 1996, 1997 -->
<!-- Version:    Generations REXX Script v1.6b, SC, 1997June29 -->
<!-- Programmer: Stephane Charette -->
<!-- Source:     minimized_icon_overwritten.gen -->
<!-- Author:     St&eacute;phane Charette, charette@writeme.com -->
<!-- Generated:  1997 November 02, 12:20:23 -->

<head>
<title>Open Class Library FAQ v0.1e - How to Prevent the Minimized Icon From Being Overwritten</title>
</head>

<body>
<img width=40 height=40 alt="" align=left src="../40x40_va_logo.gif">
<font size=+3>How to Prevent the Minimized Icon From Being Overwritten</font>
<hr>
<br clear=all><p>
If your dialog window contains or consists of a canvas, then when you minimize
the window, the icon which is being used (<code>IFrameWindow::setIcon()</code>)
will be drawn correctly on the screen.  However, if you have some controls
which are not on a canvas, then you will run into a problem where the
minimized icon is being overwritten by some of your controls.
<P>
This is a common problem -- I believe with native PM applications as well --
that can very easily be fixed.
<P>
In your application, you will need to create a command handler for your
window to capture all of the system commands. This can be done by
inheriting from <code>ICommandHandler</code>, and declaring the function
<code>Boolean systemCommand( ICommandEvent &amp;event );</code>.  Then when you
detect the <code>ISystemMenu::idMinimize</code> event, you need to
<code>hide()</code> the offending controls.  Likewise, when you detect the
<code>ISystemMenu::idRestore</code> event, you need to <code>show()</code>
the controls that have previously been hidden.
<P>
For example:
<xmp>
/* this is part pseudo-code and will not compile without modifications */
class myClass : public IFrameWindow, public ICommandHandler
{
   myClass() :                // constructor for class...
      IFrameWindow(...),      // ...inherit from IFrameWindow...
      ICommandHandler() {;};  // ...and from ICommandHandler
   Boolean systemCommand( ICommandEvent &event );  // inherited from ICommandHandler
};

int main()
{
   myClass *frame = new myClass();  // create class
   frame->setIcon( MY_ICON_RCID );  // set default icon
   frame->(ICommandHandler)handleEventsFor( frame );   // setup handler
   ...do some more stuff here...
   frame->(ICommandHandler)stopHandlingEventsFor( frame );  // stop handler
   return 0;
}

myClass::systemCommand( ICommandEvent &event )
{
   if( event.commandId() == ISystemMenu::idMinimize )
   {
      ...hide controls overwriting the icon by calling their hide() method...
   }
   if( event.commandId() == ISystemMenu::idRestore )
   {
      ...show controls overwriting the icon by calling their show() method...
   }
   return false;  // return as if the event hasn't been handled
}
</xmp>
<dl>
<dt>Note:
<dd>See also
<a href="assign_icon_to_window.html">How to Assign an Icon to a Window</a> and
<a href="../general_info/hobbes_index.html">Index of Samples on Hobbes</a>
</dl>

<!-- start the navigation toolbar -->
<hr>
<a href="../index.html"><img width=32 height=32 alt="[Home]" border=0 src="../32x32_home_o.gif"></a>
<a href="index.html"><img width=32 height=32 alt="[Index]" border=0 src="../32x32_up_o.gif"></a>
<!-- end of navigation toolbar -->

<hr>
<address>
Page generated by St&eacute;phane Charette on 1997 November 02<br>
Open Class Library (OCL) FAQ &copy; St&eacute;phane Charette, 1997<br>
</address>

</body>

</html>
